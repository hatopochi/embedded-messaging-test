<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MIAW 計測テスト</title>


</head>
<body>
  <h1>MIAW 計測テストC</h1>
  <p class="hint">このページを開いてチャットランチャーを表示・押下し、プレチャットの表示・送信まで進むと、イベントが dataLayer（またはブラウザのコンソール）に送られます。</p>
<!-- ここは本文 … -->

<!-- 1) MIAW 初期化関数（任意で head でも可） -->
<script>
function initEmbeddedMessaging(){
  try{
    embeddedservice_bootstrap.settings.language = 'ja';
    embeddedservice_bootstrap.init(
      '00DXXXXXXXXXXXX',      // Org Id
      'MyWebMessaging',       // デプロイメント名
      'https://<your-exp-site>.my.site.com/<deploymentPath>',
      { scrt2URL: 'https://<your-domain>.my.salesforce-scrt.com' }
    );
  }catch(e){ console.error('MIAW init error', e); }
}
</script>

<!-- 2) ブートストラップ本体を読み込み、onload で init 実行（＝ここが </body> 直前） -->
<script src="https://<your-exp-site>.my.site.com/<deploymentPath>/assets/js/bootstrap.min.js"
        onload="initEmbeddedMessaging()"></script>

<!-- 3) （任意）Event Listeners は準備完了後に登録 -->
<script>
window.addEventListener('onEmbeddedMessagingReady', () => {
  window.addEventListener('onEmbeddedMessagingButtonCreated', () => console.log('created'));
  window.addEventListener('onEmbeddedMessagingButtonClicked', () => console.log('clicked'));
  window.addEventListener('onEmbeddedMessagingPreChatLoaded', () => console.log('prechat loaded'));
  window.addEventListener('onEmbeddedMessagingPreChatSubmitted', () => console.log('prechat submitted'));
  window.addEventListener('onEmbeddedMessagingConversationStarted', () => console.log('started'));
});
</script>
</body>
</html>

  <noscript>JavaScript を有効にしてください。</noscript>
</body>
</html>
